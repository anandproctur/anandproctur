!function(){function e(e,n){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return r=e.done,e},e:function(e){l=!0,s=e},f:function(){try{r||null==i.return||i.return()}finally{if(l)throw s}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{AQyt:function(e,t,n){"use strict";n.r(t),t.default='<div class="page-content">\r\n    <div class="w98">\r\n        <div class="tab-content">\r\n            <div id="structure">\r\n                <div class="padding1">\r\n                    <input type="text" class="input magnifying-glass wid240" name="" placeholder="Search"\r\n                        [(ngModel)]="searchText" (keyup)="searchInList()">\r\n                    <a routerLink=\'/view/fee/data-setup/fee-structure/add\'> <button class="blue_button right">New\r\n                            Structure</button></a>\r\n                </div>\r\n                <div class="school">\r\n                    <div class="table_heading">\r\n                        <div>Fee Structure</div>\r\n                        <div *ngIf="schoolModel && !isTemplateNotLinkWithCourseAndStandard">Standard</div>\r\n                        <div *ngIf="!schoolModel && !isTemplateNotLinkWithCourseAndStandard">Category/Course</div>\r\n                        <div *ngIf="!schoolModel && !isTemplateNotLinkWithCourseAndStandard">Batch</div>\r\n                        <div *ngIf="countryDetails.length>1">Country</div>\r\n                        <div class="flex">\r\n                            <div class="right wid50"><span class="right">Total Fees</span></div>\r\n                            <div class="light wid50"><span class="left"></span></div>\r\n                        </div>\r\n                        \x3c!-- <div>Students Assigned</div> --\x3e\r\n                        <div>Action</div>\r\n                    </div>\r\n                    <div class="tableHeight">\r\n                        <div *ngFor="let data of tabkeList">\r\n                            <div class="table_body">\r\n                                <div><label>Fee Structure</label>{{data.template_name}}</div>\r\n                                <div *ngIf="schoolModel && !isTemplateNotLinkWithCourseAndStandard"> {{data.standard_name}}\r\n                                </div>\r\n                                <div *ngIf="!schoolModel && !isTemplateNotLinkWithCourseAndStandard">\r\n                                    <label *ngIf="schoolModel && !isTemplateNotLinkWithCourseAndStandard">Standard</label>\r\n                        <label *ngIf="!schoolModel && !isTemplateNotLinkWithCourseAndStandard">Master Course</label>\r\n                                    {{data.master_course_standard_name}}</div>\r\n                                <div *ngIf="!schoolModel && !isTemplateNotLinkWithCourseAndStandard">\r\n                                    <label>Course</label>\r\n                                    <span>{{data.course_subject_name}}</span></div>\r\n                                <div *ngIf="countryDetails.length>1"> <label>Country</label>{{data.country_name}}</div>\r\n                                <div class="flex">\r\n                                    <label>Total Fees</label>\r\n                                    <div class="right wid50"><span class="right">{{data.studentwise_total_fees_amount | number }}</span></div>\r\n                                    <div class="light wid50"><span class="left"></span></div>\r\n                                </div>\r\n                                \x3c!-- <div><a (click)="studentsAssigned(data)" class="students_assigned pointer" data-toggle="modal"\r\n                                        data-target="#myModal">{{data.totalAssignedStudent}}</a></div> --\x3e\r\n                                <div>\r\n                                    \x3c!-- <a class="mr10"><img src="../../../../../assets/images/icon7.svg" title="View"\r\n                                        class="size22"></a> --\x3e\r\n                                        <label>Action</label>\r\n                                    <a class="mr10" (click)="editFeeStructure(data)"><img\r\n                                            src="../../../../../assets/images/EDit.png" title="Edit"\r\n                                            class="size22 pointer"></a>\r\n                                    <a><img src="../../../../../assets/images/Group321.svg"\r\n                                            (click)="deleteFeeStructure(data)" title="Delete"\r\n                                            class="size22 pointer"></a>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row filter-res pagination" style="width: 100%;">\r\n        <div class="c-lg-12 c-md-12 c-sm-12 align-right">\r\n            <pagination (goPage)="fetchTableDataByPage($event)" (goNext)="fetchNext()" (goPrev)="fetchPrevious()"\r\n                [pagesToShow]="10" [page]="PageIndex" [perPage]="displayBatchSize" [count]="totalRow">\r\n            </pagination>\r\n        </div>\r\n    </div>\r\n    \x3c!-- The Modal --\x3e\r\n    <div class="modal" id="myModal">\r\n        <div class="modal-dialog">\r\n            <div class="modal-content">\r\n                <div class="modal-header">\r\n                    <h4 class="modal-title">Students Assigned</h4>\r\n                    <button type="button" class="close" data-dismiss="modal">&times;</button>\r\n                </div>\r\n                <div class="modal-body">\r\n                    <div class="tableHeight">\r\n                        <div class="student">\r\n                            <div class="table_heading">\r\n                                <div>Student Id</div>\r\n                                <div>Student Name</div>\r\n                            </div>\r\n                            <div *ngFor="let data of studentList">\r\n                                <div class="table_body">\r\n                                    <div>{{data.student_disp_id}}</div>\r\n                                    <div>{{data.student_name}}</div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="modal" id="editFeeStructureModel" aria-hidden="true">\r\n    <div class="modal-dialog">\r\n        <div class="modal-content" >\r\n            <div class="modal-header">\r\n                <h4  class="modal-title">Edit Fee Structure</h4>\r\n                <input type="text" [(ngModel)]="templateName" placeholder="Fee Structure"\r\n                  class="input wid80"/>\r\n                <input type="checkbox" name="checked" [(ngModel)]="is_default" > Is Default\r\n                <button type="button" class="close" data-dismiss="modal" (click)="closePopUp()">&times;</button>\r\n            </div>\r\n            <div class="modal-body" >\r\n                <span class="right relative" style="margin-bottom: 12px;">\r\n                    <span class="green_top">Total Amount{{is_tax_enabled?\' (Inc. Of Tax) \':\'\'}}:<span>{{currencySymbol}} {{ totalFeeAmount | number }}</span></span>\r\n                    <p class="itax" *ngIf="is_tax_enabled">Total Tax: {{currencySymbol}} {{totalTax | number}}</p>\r\n                </span>\r\n                <div class="fee_new">\r\n                    <div class="table_heading">\r\n                        <div>#</div>\r\n                        <div>Fee Type </div>\r\n                        <div>{{(schoolModel || isTemplateNotLinkWithCourseAndStandard)?\'Day Of Month\':\'Trigger Date\'}}</div>\r\n                        <div>{{(schoolModel || isTemplateNotLinkWithCourseAndStandard)?\'Month\':\'Day/Month\'}}</div>\r\n                        <div *ngIf="(schoolModel || isTemplateNotLinkWithCourseAndStandard)">Year</div>\r\n                        <div><span>Total Fees <span class="light">(In )</span></span></div>\r\n                        <div>Action</div>\r\n                    </div>\r\n                    <div *ngFor="let data of feeInstalllmentArr; let i=index;">\r\n                        <div class="table_body">\r\n                            <div>  <label>#</label>{{i+1}}</div>\r\n                            <div>\r\n                                <label>Fee Type </label>\r\n                                <select class="input wid80 select1" [(ngModel)]="feeInstalllmentArr[i].fee_type"\r\n                                    (ngModelChange)="calculateTotalFee()">\r\n                                    <option value="-1">Fee Type</option>\r\n                                    <option *ngFor="let data of feeTypeList" [value]="data.fee_type_id">\r\n                                        {{data.fee_type | titlecase}}\r\n                                    </option>\r\n                                </select>\r\n                            </div>\r\n                            <div *ngIf="schoolModel || isTemplateNotLinkWithCourseAndStandard">\r\n                                <label>{{(schoolModel || isTemplateNotLinkWithCourseAndStandard)?\'Day Of Month\':\'Trigger Date\'}}</label>\r\n                                <select class="input wid80 select2" [(ngModel)]="feeInstalllmentArr[i].days">\r\n                                    <option value="-1">Day</option>\r\n                                    <option *ngFor="let day of dayOfmonth" [value]="day">{{day}}</option>\r\n                                </select>\r\n                            </div>\r\n                            <div *ngIf="!schoolModel && !isTemplateNotLinkWithCourseAndStandard">\r\n                                <label>{{(schoolModel || isTemplateNotLinkWithCourseAndStandard)?\'Month\':\'Day/Month\'}}</label>\r\n                                <select class="input wid80 select2" [(ngModel)]="feeInstalllmentArr[i].day_type"\r\n                                    (ngModelChange)="changesValuesAsPerType($event,i)">\r\n                                    <option value="-1">Trigger Date</option>\r\n                                    <option value="1">Batch Assign Date (CAD)</option>\r\n                                    <option value="2">No of days after CAD</option>\r\n                                    <option value="3">No of Month after CAD</option>\r\n                                </select>\r\n                            </div>\r\n                            <div *ngIf="schoolModel || isTemplateNotLinkWithCourseAndStandard">\r\n                                <label *ngIf="(schoolModel || isTemplateNotLinkWithCourseAndStandard)">Year</label>\r\n                                <select class="input wid80 select2" [(ngModel)]="feeInstalllmentArr[i].month">\r\n                                    <option value="-1">Month</option>\r\n                                    <option *ngFor="let month of months" [value]="month.id">{{month.value}}\r\n                                    </option>\r\n                                </select>\r\n                            </div>\r\n                            <div *ngIf="schoolModel || isTemplateNotLinkWithCourseAndStandard">\r\n                                <label>Total Fees </label>\r\n                                <select class="input wid80 select2" [(ngModel)]="feeInstalllmentArr[i].year">\r\n                                    <option value="-1">Year</option>\r\n                                    <option value="2020">2020</option>\r\n                                    <option value="2021">2021</option>\r\n                                    <option value="2022">2022</option>\r\n                                    <option value="2023">2023</option>\r\n                                    <option value="2024">2024</option>\r\n                                    <option value="2025">2025</option>\r\n                                </select>\r\n                            </div>\r\n                            <div *ngIf="!schoolModel && !isTemplateNotLinkWithCourseAndStandard">\r\n                                <label>Action</label>\r\n                                <input type="text" [readonly]="feeInstalllmentArr[i].day_type==1" [(ngModel)]="feeInstalllmentArr[i].days" placeholder="00"\r\n                                    class="input wid80 rrs"\r\n                                    onkeypress="return (event.charCode >= 48 && event.charCode <= 57)">\r\n                            </div>\r\n                            <div> <label>Action</label><input type="text" [(ngModel)]="feeInstalllmentArr[i].fees_amount" placeholder="00"\r\n                                    class="input wid80 rrs" (keyup)="calculateTotalFee()"\r\n                                    onkeypress="return (event.charCode >= 48 && event.charCode <= 57)"></div>\r\n                            <div>\r\n                                <label>Action</label>\r\n                                <a (click)="addInstallment(i)" class="mr10"><img\r\n                                        src="../../../../../assets/images/add.svg" class="size22" title="Add"></a>\r\n                                <a (click)="deleteInstallment(i)"><img src="../../../../../assets/images/Group321.svg"\r\n                                        class="size22" title="Delete"></a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="padding1">\r\n                        <span class="right">\r\n                            <button class="white_button mr10" (click)="closePopUp()">\r\n                                Cancel\r\n                            </button>\r\n                            <button class="blue_button " (click)="updateFeeStructure()">\r\n                                Save\r\n                            </button>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>'},"L5K/":function(e,t,n){"use strict";n.r(t),t.default="* {\n  margin: 0px;\n}\n\nbody {\n  font-family: 'Open Sans', sans-serif;\n}\n\n.flex {\n  display: flex;\n}\n\n.blue_button {\n  background-color: #109CF1;\n  color: white;\n  padding: 9px 20px;\n  font-size: 12px;\n  border: none;\n  border-radius: 5px;\n  font-weight: 500;\n  cursor: pointer;\n}\n\n.select {\n  padding: 7px 20px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n  font-size: 13px;\n  font-weight: 500;\n  color: #787A7D;\n}\n\n.input {\n  padding: 7px 10px;\n  font-size: 13px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n  font-weight: 500;\n  height: 35px;\n}\n\ninput:focus,\nselect:focus,\nbutton:focus {\n  outline: none;\n}\n\n/*swiching tabs*/\n\n.nav-item .nav-link {\n  font-weight: 600;\n  color: #405877;\n  padding-bottom: 8px;\n  cursor: pointer;\n  font-size: 13px;\n}\n\n.nav-item .nav-link.active {\n  border-bottom: 3px solid #109CF1 !important;\n  color: #109CF1 !important;\n}\n\n.nav-link {\n  display: block;\n  padding: 1.5rem 0rem;\n  margin: -1rem 2rem;\n  margin-left: 0rem;\n}\n\n.head_padding {\n  padding-bottom: 15px;\n  box-shadow: 0px 7px 5px -3px rgba(0, 0, 0, 0.1);\n  -webkit-box-shadow: 0px 7px 5px -3px rgba(0, 0, 0, 0.1);\n  -moz-box-shadow: 0px 7px 5px -3px rgba(0, 0, 0, 0.1);\n}\n\n.w98 {\n  width: 98%;\n  margin: 0px auto;\n}\n\n.table_heading {\n  width: 100%;\n  background-color: #DFE5F0;\n  /* padding: 10px 0px;*/\n  margin: 10px 0px;\n  display: flex;\n  border-radius: 5px;\n  box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.1);\n}\n\n.fee_types .table_heading > div {\n  width: calc(100% / 4);\n}\n\n.table_heading > div {\n  text-align: center;\n  font-weight: 600;\n  font-size: 12px;\n  color: #323C47;\n  line-height: 40px;\n}\n\n.table_body {\n  width: 100%;\n  margin-bottom: 10px;\n  display: flex;\n  border-radius: 5px;\n  box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.1);\n}\n\n.table_body > div {\n  text-align: center;\n  font-weight: 500;\n  font-size: 13px;\n  color: #807C7C;\n  /* padding: 5px 0px;*/\n  margin: auto;\n  line-height: 40px;\n}\n\n.fee_types .table_body > div {\n  width: calc(100% / 4);\n}\n\n.discount .table_heading > div {\n  width: calc(100% / 3);\n}\n\n.discount .table_body > div {\n  width: calc(100% / 3);\n}\n\n.bottom_pagignation {\n  padding-top: 10px;\n  background-color: #fff;\n  position: fixed;\n  bottom: 0px;\n  z-index: 100;\n}\n\n.bottom_pagignation p {\n  font-weight: 500;\n  font-size: 13px;\n  line-height: 20px;\n}\n\n.bottom_pagignation select {\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n  font-size: 13px;\n  font-weight: 500;\n  color: #0079FF;\n  display: inline;\n}\n\n.bottom_pagignation .w20 {\n  width: 20%;\n}\n\n.bottom_pagignation .w10 {\n  width: 10%;\n}\n\n.bottom_pagignation .w50 {\n  width: 50%;\n}\n\n.bottom_pagignation .w40 {\n  width: 40%;\n}\n\n.number {\n  font-weight: 500;\n  font-size: 13px;\n  line-height: 20px;\n  letter-spacing: 0.01em;\n  color: #000000;\n  margin: 0px 4px;\n}\n\n.active_circle {\n  font-weight: 500;\n  font-size: 13px;\n  line-height: 20px;\n  letter-spacing: 0.01em;\n  color: #fff;\n  padding: 2px 7px;\n  border-radius: 50%;\n  background: #0079FF;\n}\n\n.next {\n  font-weight: 600;\n  font-size: 13px;\n  line-height: 20px;\n  letter-spacing: 0.01em;\n  color: #0079FF;\n}\n\n.w450 {\n  width: 345px;\n}\n\n.modal-title {\n  color: #2B2626;\n  font-weight: 600;\n  font-size: 13px;\n}\n\n.white_button {\n  background-color: #fff;\n  color: #109CF1;\n  padding: 8px 20px;\n  font-size: 12px;\n  border: 1px solid #109CF1;\n  border-radius: 5px;\n  font-weight: 500;\n}\n\n.w100 {\n  width: 100%;\n}\n\n.modal textarea {\n  height: 100px;\n  width: 100%;\n}\n\n.feestruc .table_heading > div {\n  width: calc(100% / 4);\n}\n\n.feestruc .table_body > div {\n  width: calc(100% / 4);\n}\n\n.mr10 {\n  margin-right: 10px;\n}\n\n.magnifying-glass {\n  background-repeat: no-repeat;\n  background-position: left center;\n  text-indent: 10px;\n}\n\n.padding1 {\n  margin-top: 20px;\n}\n\n.text {\n  color: #8A8B8B;\n  font-weight: 300;\n  font-size: 24px;\n}\n\n.position {\n  position: relative;\n  left: 13%;\n}\n\n.center {\n  text-align: center;\n}\n\n.dummy_text {\n  height: 250px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n}\n\n.dummy_text > p {\n  width: 600px;\n  color: #61758E;\n}\n\n.school .table_heading > div {\n  width: calc(100% / 6);\n}\n\n.school .table_body > div {\n  width: calc(100% / 6);\n}\n\n.tution .table_heading > div {\n  width: calc(100% / 5);\n}\n\n.tution .table_body > div {\n  width: calc(100% / 5);\n}\n\n.fee_new .table_heading > div {\n  width: calc((100% - 450px) /3);\n}\n\n.fee_new .table_body > div {\n  width: calc((100% - 450px) / 3);\n  padding: 0px 0px;\n  margin: 0px;\n  margin-bottom: 10px;\n}\n\n.fee_new .table_heading > div:nth-child(2) {\n  width: 300px;\n}\n\n.fee_new .table_body > div:nth-child(2) {\n  width: 300px;\n}\n\n.fee_new .table_heading > div:first-child {\n  width: 50px;\n}\n\n.fee_new .table_body > div:first-child {\n  width: 50px;\n}\n\n.fee_new .table_heading > div:last-child,\n.fee_new .table_body > div:last-child {\n  width: 100px;\n}\n\n.wid80 {\n  width: 75%;\n  margin: auto;\n}\n\n.rrs::-webkit-input-placeholder {\n  text-align: right;\n}\n\n.select1 {\n  color: #8e8f90;\n  line-height: 20px;\n}\n\n.select2 {\n  color: #8e8f90;\n  line-height: 20px;\n}\n\n.img {\n  width: 100%;\n  height: auto;\n}\n\n.wid240 {\n  width: 200px;\n}\n\n.green_top {\n  padding: 5px 32px;\n  background: linear-gradient(92.13deg, #19bb3c 71.19%, #90d73e 103.74%);\n  border-radius: 5px;\n  text-align: center;\n  font-weight: 600;\n  font-size: 13px;\n  line-height: 18px;\n  letter-spacing: 0.01em;\n  color: #FFFFFF;\n}\n\n.green_top > span {\n  padding-left: 10px;\n}\n\n.itax {\n  padding-top: 8px;\n  font-weight: normal;\n  font-size: 12px;\n  line-height: 14px;\n  text-align: right;\n  letter-spacing: 0.01em;\n  color: #323C47;\n}\n\n.relative {\n  position: relative;\n}\n\n.installments {\n  font-weight: 600;\n  font-size: 13px;\n  line-height: 15px;\n  letter-spacing: 0.01em;\n  color: #109CF1;\n}\n\n.info {\n  padding: 0px 4px;\n  color: #109CF1;\n}\n\n.save {\n  width: 100%;\n  background-color: #fff;\n}\n\n.save > button {\n  position: fixed;\n  right: 15px;\n  bottom: 10px;\n}\n\n.fee_new {\n  max-height: 55vh;\n  overflow-y: auto;\n  width: 100%;\n}\n\n.page_heading > p {\n  color: #334D6E;\n  font-weight: 600;\n  font-size: 14px;\n}\n\n.page_heading > p {\n  margin-bottom: 0px;\n}\n\n.pageheadingspace {\n  margin-bottom: 7px;\n}\n\n.light {\n  font-weight: 500;\n  padding-left: 5px;\n}\n\n.indent {\n  float: left;\n  padding-left: 3.7rem;\n}\n\n.left {\n  float: left;\n}\n\n.wid50 {\n  width: 50%;\n}\n\n.student .table_heading > div {\n  width: calc(100% / 2);\n}\n\n.student .table_body > div {\n  width: calc(100% / 2);\n}\n\n.size22 {\n  height: auto;\n  width: 18px;\n}\n\n.select3 {\n  color: #8e8f90;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  background-image: url('arrow-down.svg');\n  background-repeat: no-repeat;\n  background-position: 430px center;\n  line-height: 20px;\n}\n\n.right {\n  float: right;\n}\n\n.pointer {\n  cursor: pointer;\n}\n\n.fee_new .table_body div:nth-child(n) label {\n  display: none;\n}\n\n@media only screen and (max-width: 850px) {\n  .padding1 {\n    display: flex;\n    justify-content: space-between;\n    flex-wrap: wrap;\n  }\n  .padding1 .wid240.mr10 {\n    width: calc((100% - 10px) / 2);\n    margin-right: 0px;\n    margin-bottom: 10px;\n  }\n  .right.relative {\n    float: initial;\n    display: block;\n    margin-top: 10px;\n    margin-left: auto;\n  }\n  .green_top {\n    padding: 5px 12px;\n  }\n  .fee_new {\n    max-height: none;\n    overflow-y: visible;\n    margin-bottom: 55px;\n  }\n  .fee_new .table_heading {\n    display: none;\n  }\n  .fee_new .table_body {\n    display: block;\n  }\n  .fee_new .table_body div:nth-child(n) {\n    width: 100%;\n    text-align: left;\n    display: flex;\n  }\n  .fee_new .table_body div:nth-child(n) .wid80 {\n    width: 55%;\n  }\n  .fee_new .table_body div:nth-child(n) label {\n    width: 45%;\n    display: block;\n    color: #8b8b8b;\n    white-space: nowrap;\n  }\n  .save > .blue_button {\n    position: static;\n    margin-left: auto;\n    margin-right: 4%;\n  }\n  .save {\n    display: flex;\n    padding: 10px 0px;\n    position: fixed;\n    bottom: 0;\n  }\n}\n"},NTek:function(e,t,n){"use strict";n.r(t),t.default='* {\n  margin: 0px;\n}\n\nbody {\n  font-family: \'Open Sans\', sans-serif;\n}\n\n.flex {\n  display: flex;\n}\n\n.blue_button {\n  background-color: #109CF1;\n  color: white;\n  padding: 0px 20px;\n  font-size: 12px;\n  border: none;\n  height: 35px;\n  border-radius: 5px;\n  font-weight: 500;\n  cursor: pointer;\n}\n\n.select {\n  padding: 7px 20px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n  font-size: 13px;\n  font-weight: 500;\n  color: #787A7D;\n}\n\n.input {\n  padding: 7px 10px;\n  font-size: 13px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n  font-weight: 500;\n  height: 35px;\n}\n\ninput:focus,\nselect:focus,\nbutton:focus {\n  outline: none;\n}\n\n/*swiching tabs*/\n\n.nav-item .nav-link {\n  font-weight: 600;\n  color: #405877;\n  padding-bottom: 8px;\n  cursor: pointer;\n  font-size: 13px;\n}\n\n.nav-item .nav-link.active {\n  border-bottom: 3px solid #109CF1 !important;\n  color: #109CF1 !important;\n}\n\n.nav-link {\n  display: block;\n  padding: 1.5rem 0rem;\n  margin: -1rem 2rem;\n  margin-left: 0rem;\n}\n\n.head_padding {\n  padding: 15px 0px;\n  box-shadow: 0px 7px 5px -3px rgba(0, 0, 0, 0.1);\n  -webkit-box-shadow: 0px 7px 5px -3px rgba(0, 0, 0, 0.1);\n  -moz-box-shadow: 0px 7px 5px -3px rgba(0, 0, 0, 0.1);\n}\n\n.w98 {\n  width: 98%;\n  margin: 0px auto;\n}\n\n.table_heading {\n  width: 100%;\n  background-color: #DFE5F0;\n  /* padding: 10px 0px;*/\n  margin: 10px 0px;\n  display: flex;\n  height: 35px;\n  align-items: center;\n  border-radius: 5px;\n  box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.1);\n}\n\n.fee_types .table_heading > div {\n  width: calc(100% / 4);\n}\n\n.table_heading > div {\n  text-align: center;\n  font-weight: 600;\n  font-size: 12px;\n  color: #323C47;\n  line-height: 14px;\n  margin: auto;\n}\n\n.table_body {\n  width: 100%;\n  margin-bottom: 10px;\n  display: flex;\n  border-radius: 5px;\n  line-height: 35px;\n  padding: 10px 0px;\n  box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.1);\n}\n\n.table_body > div {\n  text-align: center;\n  font-weight: 500;\n  font-size: 13px;\n  color: #807C7C;\n  margin: auto;\n  line-height: 18px;\n}\n\n.fee_types .table_body > div {\n  width: calc(100% / 4);\n}\n\n.discount .table_heading > div {\n  width: calc(100% / 5);\n}\n\n.discount .table_body > div {\n  width: calc(100% / 5);\n}\n\n.bottom_pagignation {\n  padding-top: 10px;\n  background-color: #fff;\n  position: fixed;\n  bottom: 0px;\n  z-index: 100;\n}\n\n.bottom_pagignation p {\n  font-weight: 500;\n  font-size: 13px;\n  line-height: 20px;\n}\n\n.bottom_pagignation select {\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n  font-size: 13px;\n  font-weight: 500;\n  color: #0079FF;\n  display: inline;\n}\n\n.bottom_pagignation .w20 {\n  width: 20%;\n}\n\n.bottom_pagignation .w10 {\n  width: 10%;\n}\n\n.bottom_pagignation .w50 {\n  width: 50%;\n}\n\n.bottom_pagignation .w40 {\n  width: 40%;\n}\n\n.number {\n  font-weight: 500;\n  font-size: 13px;\n  line-height: 20px;\n  letter-spacing: 0.01em;\n  color: #000000;\n  margin: 0px 4px;\n}\n\n.active_circle {\n  font-weight: 500;\n  font-size: 13px;\n  line-height: 20px;\n  letter-spacing: 0.01em;\n  color: #fff;\n  padding: 2px 7px;\n  border-radius: 50%;\n  background: #0079FF;\n}\n\n.next {\n  font-weight: 600;\n  font-size: 13px;\n  line-height: 20px;\n  letter-spacing: 0.01em;\n  color: #0079FF;\n}\n\n.w450 {\n  width: 345px;\n}\n\n.modal-title {\n  color: #2B2626;\n  font-weight: 600;\n  font-size: 13px;\n  font-family: \'Open Sans\', sans-serif;\n  margin-bottom: 0px;\n}\n\n.white_button {\n  background-color: #fff;\n  color: #109CF1;\n  padding: 8px 20px;\n  height: 35px;\n  font-size: 12px;\n  border: 1px solid #109CF1;\n  border-radius: 5px;\n  font-weight: 500;\n}\n\n.w100 {\n  width: 100%;\n}\n\n.modal textarea {\n  height: 100px;\n  width: 100%;\n}\n\n.feestruc .table_heading > div {\n  width: calc(100% / 4);\n}\n\n.feestruc .table_body > div {\n  width: calc(100% / 4);\n}\n\n.mr10 {\n  margin-right: 10px;\n}\n\n.magnifying-glass {\n  background-image: url(\'Vector1.png\');\n  background-repeat: no-repeat;\n  background-position: left center;\n  text-indent: 15px;\n}\n\n.text {\n  color: #8A8B8B;\n  font-weight: 300;\n  font-size: 24px;\n}\n\n.position {\n  position: relative;\n  left: 13%;\n}\n\n.center {\n  text-align: center;\n}\n\n.dummy_text {\n  height: 250px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n}\n\n.dummy_text > p {\n  width: 600px;\n  color: #61758E;\n}\n\n.school .table_heading > div {\n  width: calc(100% / 6);\n}\n\n.school .table_body > div {\n  width: calc(100% / 6);\n}\n\n.tution .table_heading > div {\n  width: calc(100% / 5);\n}\n\n.tution .table_body > div {\n  width: calc(100% / 5);\n}\n\n.fee_new .table_heading > div {\n  width: calc((100% - 380px) / 5);\n}\n\n.fee_new .table_body > div {\n  width: calc((100% - 380px) / 5);\n  padding: 0px 0px;\n  margin: auto;\n  margin-bottom: 10px;\n}\n\n.fee_new .table_heading > div:nth-child(2) {\n  width: 330px;\n}\n\n.fee_new .table_body > div:nth-child(2) {\n  width: 330px;\n}\n\n.fee_new .table_heading > div:first-child {\n  width: 50px;\n}\n\n.fee_new .table_body > div:first-child {\n  width: 50px;\n}\n\n.wid80 {\n  width: 80%;\n  margin: auto;\n}\n\n.rrs::-webkit-input-placeholder {\n  text-align: right;\n}\n\n.img {\n  width: 100%;\n  height: auto;\n}\n\n.wid240 {\n  width: 240px;\n}\n\n.green_top {\n  padding: 5px 32px;\n  background: linear-gradient(92.13deg, #19bb3c 71.19%, #90d73e 103.74%);\n  border-radius: 5px;\n  text-align: center;\n  font-weight: 600;\n  font-size: 13px;\n  line-height: 18px;\n  letter-spacing: 0.01em;\n  color: #FFFFFF;\n}\n\n.green_top > span {\n  padding-left: 10px;\n}\n\n.itax {\n  padding-top: 8px;\n  font-weight: normal;\n  font-size: 12px;\n  line-height: 14px;\n  text-align: right;\n  letter-spacing: 0.01em;\n  color: #323C47;\n}\n\n.relative {\n  position: relative;\n}\n\n.installments {\n  font-weight: 600;\n  font-size: 13px;\n  line-height: 15px;\n  letter-spacing: 0.01em;\n  color: #109CF1;\n}\n\n.info {\n  padding: 0px 4px;\n  color: #109CF1;\n}\n\n.save {\n  width: 100%;\n  position: fixed;\n  bottom: 47px;\n  z-index: 100;\n  height: 65px;\n  background-color: #fff;\n}\n\n.save > button {\n  position: fixed;\n  right: 15px;\n  bottom: 60px;\n}\n\n.fee_new1 {\n  margin-bottom: 140px;\n}\n\n.page_heading > p {\n  color: #334D6E;\n  font-weight: 600;\n  font-size: 14px;\n  margin-bottom: 0px;\n}\n\n.pageheadingspace {\n  margin-bottom: 7px;\n}\n\n.light {\n  font-weight: 500;\n  padding-left: 5px;\n}\n\n.indent {\n  float: left;\n  padding-left: 3.7rem;\n}\n\n.left {\n  float: left;\n}\n\n.wid50 {\n  width: 50%;\n}\n\n.student .table_heading > div {\n  width: calc(100% / 2);\n}\n\n.student .table_body > div {\n  width: calc(100% / 2);\n}\n\n.size22 {\n  height: auto;\n  width: 18px;\n}\n\n.select3 {\n  color: #8e8f90;\n  line-height: 20px;\n}\n\n.nav > li {\n  display: inline;\n}\n\n.nav-link {\n  display: inline;\n}\n\n.nav-link:hover,\n.nav-link,\n.nav-link:focus {\n  background-color: transparent;\n}\n\n.nav-item .nav-link {\n  font-weight: 600;\n  color: #405877;\n  padding-bottom: 8px;\n  cursor: pointer;\n  font-size: 13px;\n  float: left;\n  background: none;\n}\n\n.nav-item .active {\n  border-bottom: 3px solid #109cf1 !important;\n  color: #109cf1 !important;\n}\n\n.modal {\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n}\n\n.right {\n  float: right;\n}\n\n.modal-dialog {\n  margin: 0 auto;\n  top: 10%;\n}\n\n.modal-header:before {\n  display: none;\n}\n\n.left {\n  float: left;\n}\n\n.padding2 {\n  padding-left: 50px;\n}\n\n.tableHeight {\n  height: 54vh;\n  overflow-y: auto;\n}\n\n.pointer {\n  cursor: pointer;\n}\n\n#editFeeStructureModel .modal-content {\n  width: 144%;\n}\n\n#editFeeStructureModel .modal-body {\n  max-height: 70vh;\n  margin-bottom: 10px;\n  overflow-y: auto;\n}\n\n#editFeeStructureModel .modal-header h4 {\n  float: left;\n}\n\n#editFeeStructureModel .modal-header input[type="text"] {\n  width: 45%;\n  margin-left: 10px;\n}\n\n#editFeeStructureModel .modal-header input[type="checkbox"] {\n  margin-left: 50px;\n  -webkit-appearance: checkbox;\n     -moz-appearance: checkbox;\n          appearance: checkbox;\n}\n\n.fee_new .table_body > div label,\n.school .table_body > div label {\n  display: none;\n}\n\n@media only screen and (max-width: 850px) {\n  .wid240 {\n    width: 150px;\n  }\n  #editFeeStructureModel .modal-dialog {\n    top: 0%;\n  }\n  #editFeeStructureModel .modal-content {\n    width: 100%;\n  }\n  #editFeeStructureModel .modal-header h4 {\n    float: initial;\n  }\n  #editFeeStructureModel .modal-header button {\n    position: relative;\n    top: -20px;\n  }\n  #editFeeStructureModel .modal-header input[type="text"] {\n    width: 50%;\n    margin-top: 10px;\n    margin-left: 0px;\n  }\n  #editFeeStructureModel .modal-header input[type="checkbox"] {\n    margin-left: calc(50% - 91px);\n    margin-top: 0px;\n    -webkit-appearance: checkbox;\n       -moz-appearance: checkbox;\n            appearance: checkbox;\n  }\n  #editFeeStructureModel .modal-body {\n    max-height: calc(100vh - 111px);\n    height: auto;\n    padding-bottom: 15px;\n  }\n  #editFeeStructureModel .modal-body .table_body {\n    display: block;\n  }\n  #editFeeStructureModel .modal-body .fee_new .table_body > div:nth-child(n) {\n    width: 100%;\n    text-align: left;\n  }\n  .fee_new .table_body > div {\n    display: flex;\n    width: 100%;\n  }\n  .fee_new .table_body > div .wid80 {\n    width: 55%;\n    margin: 0;\n  }\n  .school .table_body > div {\n    display: flex;\n  }\n  .school .table_body > div span {\n    width: 55%;\n  }\n  .fee_new .table_heading {\n    display: none;\n  }\n  .fee_new .table_body > div label,\n  .school .table_body > div label {\n    width: 45%;\n    padding-left: 10px;\n    display: inline-block;\n    color: #8b8b8b;\n    line-height: 35px;\n    white-space: nowrap;\n  }\n  .school .table_body {\n    display: block;\n  }\n  .school .table_heading {\n    display: none;\n  }\n  .school .table_body > div {\n    width: 100%;\n    text-align: left;\n  }\n  .school .table_body > div .right {\n    float: initial;\n  }\n  .school .table_body > div .light.wid50 {\n    display: none;\n  }\n  .tableHeight {\n    height: auto;\n    overflow-y: visible;\n  }\n}\n'},iLWn:function(e,t,n){"use strict";n.r(t),t.default=""},rojI:function(t,i,o){"use strict";o.r(i),o.d(i,"FeeStructureModule",(function(){return N}));var s,r,l,d,c,u=o("fXoL"),h=o("ofXK"),p=o("tyNb"),m=o("N+K7"),f=o("xf7K"),g=o("OHzG"),v=o("WPSm"),_=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function(e){return e&&e.__esModule?e:{default:e}},b=((s=function(){function t(e,i,a,o,s){n(this,t),this.apiService=e,this.route=i,this.auth=a,this.commonService=o,this.http=s,this.dayOfmonth=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],this.months=[{id:1,value:"Jan"},{id:2,value:"Feb"},{id:3,value:"Mar"},{id:4,value:"Apr"},{id:5,value:"May"},{id:6,value:"Jun"},{id:7,value:"Jul"},{id:8,value:"Aug"},{id:9,value:"Sep"},{id:10,value:"Oct"},{id:11,value:"Nov"},{id:12,value:"Dec"}],this.monthValue=[1,2,3,4,5,6,7,8,9,10,11,12],this.feeInstalllmentArr=[],this.newInstallment={},this.schoolModel=!1,this.is_tax_enabled=!1,this.countryDetails=[],this.masterCourseList=[],this.CourseList=[],this.addNewTemplate={template_name:"",fee_amount:"",master_course_name:"-1",course_id:-1,tax_type:"inclusive",apply_tax:!1,tax_amount:0,total_fee:0,installmentCount:"",is_default_template:!1,country_id:-1},this.feeInstallments=[],this.feeTypeList=[],this.defultFeeTypes=-1,this.showMonthDropDown=!1,this.defultCountryId=-1,this.totalFeeAmount=0,this.currencySymbol="",this.totalTax=0,this.taxPrecent=0,this.isTemplateNotLinkWithCourseAndStandard=!1}return a(t,[{key:"createInstallmentGrid",value:function(){this.newInstallment={installment_no:1,fee_type_id:this.defultFeeTypes,month:this.schoolModel||this.isTemplateNotLinkWithCourseAndStandard?1:0,day:this.schoolModel||this.isTemplateNotLinkWithCourseAndStandard?1:0,fee_amount:0,day_type:this.schoolModel||this.isTemplateNotLinkWithCourseAndStandard?4:1,year:this.schoolModel||this.isTemplateNotLinkWithCourseAndStandard?2021:0},this.feeInstalllmentArr.push(this.newInstallment)}},{key:"ngOnInit",value:function(){this.schoolModel=this.auth.schoolModel.value,this.institute_id=sessionStorage.getItem("institute_id"),this.is_tax_enabled="1"==sessionStorage.getItem("enable_tax_applicable_fee_installments"),this.isTemplateNotLinkWithCourseAndStandard="true"!=sessionStorage.getItem("is_fee_struct_linked"),this.checkModel(),this.getCountryDetails(),this.getAllMasterCourseList(),this.getInstituteFeeTypes()}},{key:"isLeapYear",value:function(e){return 0==e%4&&0!=e%100||0==e%400}},{key:"calDayMonth",value:function(e){1==e||3==e||5==e||7==e||8==e||10==e||12==e?this.dayOfmonth=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]:4==e||6==e||9==e||11==e?this.dayOfmonth=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]:2==e&&(this.dayOfmonth=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29])}},{key:"checkModel",value:function(){var e=this;this.auth.institute_type.subscribe((function(t){"LANG"==t?(e.isLangInstitute=!0,e.moduleState="Batch"):(e.isLangInstitute=!1,e.moduleState="Course")}))}},{key:"getCountryDetails",value:function(){var t=sessionStorage.getItem("country_data"),n=JSON.parse(t);if(n.length>0){this.countryDetails=n;var i,a=e(this.countryDetails);try{for(a.s();!(i=a.n()).done;){var o=i.value;if("Y"==o.is_default){this.defultCountryId=o.id,this.addNewTemplate.country_id=o.id,this.currencySymbol=o.currency_code;break}}}catch(s){a.e(s)}finally{a.f()}}}},{key:"getAllMasterCourseList",value:function(){var e=this;this.auth.showLoader(),this.isLangInstitute||this.schoolModel?this.apiService.getAllStandard().subscribe((function(t){e.masterCourseList=t,e.auth.hideLoader()}),(function(t){e.auth.hideLoader(),e.commonService.showErrorMessage("error","",t.error.message)})):this.fetchMCAndCourse()}},{key:"fetchMCAndCourse",value:function(){var e=this;this.auth.showLoader();var t="/api/v1/courseMaster/fetch/"+this.institute_id+"/all?isActiveNotExpire=Y";this.http.getData(t).subscribe((function(t){e.masterCourseList=t,e.auth.hideLoader()}),(function(t){e.commonService.showErrorMessage("error","",t.error.message),e.auth.hideLoader()}))}},{key:"addInstallment",value:function(e){this.newInstallment={installment_no:e+2,fee_type_id:this.feeInstalllmentArr[e].fee_type_id,month:this.feeInstalllmentArr[e].month,day:this.feeInstalllmentArr[e].day,fee_amount:this.feeInstalllmentArr[e].fee_amount,day_type:this.feeInstalllmentArr[e].day_type,year:this.feeInstalllmentArr[e].year},this.totalFeeAmount=this.totalFeeAmount+Number(this.feeInstalllmentArr[e].fee_amount),this.totalTax=this.totalTax+this.calculateTax(this.feeInstalllmentArr[e].fee_amount,this.feeInstalllmentArr[e].fee_type_id),this.feeInstalllmentArr.push(this.newInstallment)}},{key:"deleteInstallment",value:function(e){return 1==this.feeInstalllmentArr.length?(this.commonService.showErrorMessage("info","","You can't delete!"),!1):(this.totalFeeAmount=this.totalFeeAmount-Number(this.feeInstalllmentArr[e].fee_amount),this.totalTax=this.totalTax-this.calculateTax(this.feeInstalllmentArr[e].fee_amount,this.feeInstalllmentArr[e].fee_type_id),this.feeInstalllmentArr.splice(e,1),!0)}},{key:"onMasterCourseSelection",value:function(){var e=this;this.CourseList=[],"-1"!=this.addNewTemplate.master_course_name&&(this.isLangInstitute?this.apiService.getCoursesOfStandard(this.addNewTemplate.master_course_name).subscribe((function(t){e.CourseList=t}),(function(e){})):this.apiService.getCourse(this.addNewTemplate.master_course_name).subscribe((function(t){e.CourseList=t}),(function(t){e.commonService.showErrorMessage("error","",t.error.message)})))}},{key:"createFeeStructure",value:function(){var e=this;if(this.validateFeeStructureData()){this.auth.showLoader();var t=this.preparedFeeStructureData();this.apiService.updateFeeTemplate(t).subscribe((function(t){e.auth.hideLoader(),e.commonService.showErrorMessage("success","Updated","Fee Structure created Successfully"),e.route.navigateByUrl("/view/fee/data-setup/fee-structure/home")}),(function(t){e.auth.hideLoader(),e.commonService.showErrorMessage("error","",t.error.message)}))}}},{key:"validateFeeStructureData",value:function(){if(""!=this.addNewTemplate.template_name){if(!this.isTemplateNotLinkWithCourseAndStandard){if(this.schoolModel&&Number(this.addNewTemplate.master_course_name)<0)return void this.commonService.showErrorMessage("info","","Please select valid standard!");if(!this.isLangInstitute&&!this.schoolModel){if("-1"==this.addNewTemplate.master_course_name)return void this.commonService.showErrorMessage("info","","Please select valid Category/Course!");if(Number(this.addNewTemplate.course_id)<0)return void this.commonService.showErrorMessage("info","","Please select valid batch!")}if(this.isLangInstitute){if(Number(this.addNewTemplate.master_course_name)<0)return void this.commonService.showErrorMessage("info","","Please select valid Category/Course!");if(Number(this.addNewTemplate.course_id)<0)return void this.commonService.showErrorMessage("info","","Please select valid batch!")}}if(!(this.countryDetails.length>1&&this.addNewTemplate.country_id<0))return this.validateFeeInstallments();this.commonService.showErrorMessage("info","","Please select valid country!")}else this.commonService.showErrorMessage("info","","Please enter valid Fee Structure name!")}},{key:"validateFeeInstallments",value:function(){if(0!=this.feeInstalllmentArr.length){var t,n=e(this.feeInstalllmentArr);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(!this.validateEachInstallment(i))return void(this.feeInstallments=[]);var a={day_type:this.schoolModel||this.isTemplateNotLinkWithCourseAndStandard?4:i.day_type,days:i.day,fee_type:i.fee_type_id,fees_amount:i.fee_amount,service_tax:this.getFeeTypeTax(i.fee_type_id),service_tax_applicable:this.is_tax_enabled?"Y":"N",month:i.month,year:i.year};a.initial_fee_amount=this.calFeeAmountWithoutTax(i.fee_amount,a.service_tax),this.feeInstallments.push(a)}}catch(o){n.e(o)}finally{n.f()}return!0}this.commonService.showErrorMessage("info","","Please enter valid fee installments!")}},{key:"validateEachInstallment",value:function(e){if(e.installment_no<=0)this.commonService.showErrorMessage("info","","Please enter valid installment No.");else if(e.fee_type_id<=0)this.commonService.showErrorMessage("info","","Please select valid fee type!");else{if(this.schoolModel||this.isTemplateNotLinkWithCourseAndStandard){if(e.day<=0)return void this.commonService.showErrorMessage("info","","Please select valid fee day!");if(e.month<=0)return void this.commonService.showErrorMessage("info","","Please select valid fee month!");if(e.year<=0)return void this.commonService.showErrorMessage("info","","Please select valid fee year!")}if(!this.schoolModel){if(e.day_type<=0)return void this.commonService.showErrorMessage("info","","Please select valid trigger date!");if(e.day<0)return void this.commonService.showErrorMessage("info","","Please select valid fee day!")}if(!(e.fee_amount<=0))return!0;this.commonService.showErrorMessage("info","","Please enter valid fee amount!")}}},{key:"preparedFeeStructureData",value:function(){var e={is_default:0,country_id:this.addNewTemplate.country_id,customFeeSchedules:this.feeInstallments,studentwise_total_fees_amount:this.totalFeeAmount.toString(),studentwise_total_fees_discount:0,studentwise_fees_tax_applicable:this.is_tax_enabled?"Y":"N",template_id:0,template_name:this.addNewTemplate.template_name};return this.isTemplateNotLinkWithCourseAndStandard||(this.isLangInstitute?(e.course_id="-1",e.subject_id=this.addNewTemplate.course_id):this.schoolModel?(e.course_id="-1",e.standard_id=this.addNewTemplate.master_course_name):e.course_id=this.addNewTemplate.course_id),e}},{key:"getInstituteFeeTypes",value:function(){var t=this;this.auth.showLoader(),this.apiService.getAllFeeType().subscribe((function(n){t.auth.hideLoader(),t.feeTypeList=n;var i,a=e(t.feeTypeList);try{for(a.s();!(i=a.n()).done;){var o=i.value;if("INSTALLMENT"==o.fee_type){t.defultFeeTypes=o.fee_type_id,t.is_tax_enabled&&(t.taxPrecent=o.service_tax);break}}}catch(s){a.e(s)}finally{a.f()}t.createInstallmentGrid()}),(function(e){t.auth.hideLoader(),t.commonService.showErrorMessage("error","",e.error.message)}))}},{key:"changesValuesAsPerType",value:function(e,t){1==e&&(this.feeInstalllmentArr[t].day=0)}},{key:"calculateTotalFee",value:function(){var t,n=0,i=0,a=e(this.feeInstalllmentArr);try{for(a.s();!(t=a.n()).done;){var o=t.value;n+=Number(o.fee_amount),i+=this.calculateTax(o.fee_amount,o.fee_type_id)}}catch(s){a.e(s)}finally{a.f()}this.totalFeeAmount=n,this.totalTax=i}},{key:"getCurrencyData",value:function(t){var n,i=e(this.countryDetails);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.id==t){this.currencySymbol=a.currency_code;break}}}catch(o){i.e(o)}finally{i.f()}}},{key:"calFeeAmountWithoutTax",value:function(e,t){return this.is_tax_enabled?Math.floor(100*Number(e)/(100+Number(t))):Number(e)}},{key:"calculateTax",value:function(e,t){if(this.is_tax_enabled){var n=this.getFeeTypeTax(t);return Number(e)-this.calFeeAmountWithoutTax(e,n)}return 0}},{key:"getFeeTypeTax",value:function(t){if(this.is_tax_enabled){var n,i=e(this.feeTypeList);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(t==a.fee_type_id)return Number(a.fee_type_tax)}}catch(o){i.e(o)}finally{i.f()}}return 0}}]),t}()).ctorParameters=function(){return[{type:v.a},{type:p.Router},{type:f.a},{type:g.a},{type:m.a}]},s=function(e,t,n,i){var a,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(s=(o<3?a(s):o>3?a(t,n,s):a(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Object(u.Component)({selector:"app-fee-structure-add-edit",template:y(o("wrH6")).default,styles:[y(o("L5K/")).default]}),_("design:paramtypes",[v.a,p.Router,f.a,g.a,m.a])],s)),x=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},w=function(e){return e&&e.__esModule?e:{default:e}},S=((r=function(){function t(e,i,a,o){n(this,t),this.router=e,this.fetchService=i,this.auth=a,this.commonService=o,this.isLangInstitute=!1,this.feeInstalllmentArr=[],this.countryAdditioalFeeTypes={},this.source=[],this.isHeaderEdit=!1,this.isEditFee=!1,this.installmentList=[],this.otherInstList=[],this.otherFeetype=[],this.countryDetails=[],this.AddInstallment={days:0,day_type:1,fee_type:0,fees_amount:0,initial_fee_amount:0,is_referenced:"N",schedule_id:0,service_tax:0,service_tax_applicable:"N",tax:0,taxAmount:0},this.additionalInstallment={days:0,day_type:1,fee_type:-1,fees_amount:0,initial_fee_amount:0,is_referenced:"N",schedule_id:0,service_tax:0,service_tax_applicable:"N",fee_type_name:""},this.customJson=[],this.totalAmount="",this.discountAmount="",this.feeTyeDetails=[],this.tabkeList=[],this.searchedData=[],this.studentList=[],this.totalAmountCal=0,this.templateName="",this.PageIndex=0,this.displayBatchSize=20,this.totalRow=0,this.searchText="",this.addTemplatePopUp=!1,this.searchDataFlag=!1,this.is_tax_enabled=!1,this.schoolModel=!1,this.feeTypeList=[],this.dayOfmonth=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],this.months=[{id:1,value:"Jan"},{id:2,value:"Feb"},{id:3,value:"Mar"},{id:4,value:"Apr"},{id:5,value:"May"},{id:6,value:"Jun"},{id:7,value:"Jul"},{id:8,value:"Aug"},{id:9,value:"Sep"},{id:10,value:"Oct"},{id:11,value:"Nov"},{id:12,value:"Dec"}],this.monthValue=[1,2,3,4,5,6,7,8,9,10,11,12],this.totalTax=0,this.currencySymbol="",this.isTemplateNotLinkWithCourseAndStandard=!1,this.is_default=!1,null==sessionStorage.getItem("userid")&&this.router.navigate(["/authPage"])}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.enableTax=sessionStorage.getItem("enable_tax_applicable_fee_installments"),this.tax_type_without_percentage=sessionStorage.getItem("tax_type_without_percentage"),this.is_tax_enabled="1"==this.enableTax,this.isTemplateNotLinkWithCourseAndStandard="true"!=sessionStorage.getItem("is_fee_struct_linked"),this.auth.institute_type.subscribe((function(t){"LANG"==t?(e.isLangInstitute=!0,e.moduleState="Batch"):(e.isLangInstitute=!1,e.moduleState="Course")})),this.schoolModel=this.auth.schoolModel.value,this.fetchPrefill()}},{key:"calDayMonth",value:function(e){1==e||3==e||5==e||7==e||8==e||10==e||12==e?this.dayOfmonth=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]:4==e||6==e||9==e||11==e?this.dayOfmonth=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]:2==e&&(this.dayOfmonth=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29])}},{key:"fetchPrefill",value:function(){this.getFeeStructures(),this.fetchDataForCountryDetails()}},{key:"fetchDataForCountryDetails",value:function(){var e=sessionStorage.getItem("country_data"),t=JSON.parse(e);t.length>0&&(this.countryDetails=t)}},{key:"getFeeStructures",value:function(){var e=this;this.auth.showLoader(),this.PageIndex=1,this.fetchService.fetchFeeStruc().subscribe((function(t){e.auth.hideLoader(),e.totalRow=t.length,e.source=t,e.fetchTableDataByPage(e.PageIndex)}),(function(t){e.auth.hideLoader()}))}},{key:"editFee",value:function(e){var t=this;this.templateName=e.template_name,this.is_default=1==e.is_default,this.selectedTemplate=e,this.feeStructure=[],this.isEditFee=!0,this.auth.showLoader(),this.fetchService.fetchFeeDetail(e.template_id).subscribe((function(e){t.auth.hideLoader(),t.feeStructure=e,"1"==e.is_default?t.feeStructure.is_default=!0:t.feeStructure.is_default=!1,t.fillFeeType(t.countryAdditioalFeeTypes[t.selectedTemplate.country_id]);var n=sessionStorage.getItem("country_data"),i=JSON.parse(n);i.length>0&&i.forEach((function(e){t.selectedTemplate.country_id==e.id&&(t.selectedCountry=e)})),t.fillDataInYTable(e.customFeeSchedules),"1"==t.enableTax&&document.getElementById("checkBoxtaxes")&&(document.getElementById("checkBoxtaxes").checked=!0,t.showTaxFields()),t.totalAmountCal=e.studentwise_total_fees_amount}),(function(e){t.auth.hideLoader()}))}},{key:"showTaxFields",value:function(){this.installmentList.forEach((function(e){"Y"==e.service_tax_applicable&&(e.taxAmount=e.fees_amount-e.initial_fee_amount,e.tax=e.taxAmount)}))}},{key:"fillFeeType",value:function(e){var t=this;this.otherFeetype=[],e.forEach((function(e){var n=Object.keys(e),i={};i.id=n[0],i.value=e[n[0]],t.otherFeetype.push(i)}))}},{key:"fillDataInYTable",value:function(e){this.installmentList=[],this.otherInstList=[];for(var t=0;t<e.length;t++)"INSTALLMENT"==e[t].fee_type_name?this.installmentList.push(e[t]):this.otherInstList.push(e[t])}},{key:"closeFeeEditor",value:function(){this.getFeeStructures(),this.isHeaderEdit=!1,this.isEditFee=!1,this.templateName=""}},{key:"updateFeeStructure",value:function(){var e=this;if(this.validateFeeInstallments()){var t={is_default:this.is_default?1:0,country_id:this.selectedTemplate.country_id,customFeeSchedules:this.feeInstalllmentArr,studentwise_total_fees_amount:this.totalFeeAmount.toString(),studentwise_total_fees_discount:0,studentwise_fees_tax_applicable:this.is_tax_enabled?"Y":"N",template_id:this.selectedTemplate.template_id.toString(),template_name:this.templateName};this.auth.showLoader(),this.fetchService.updateFeeTemplate(t).subscribe((function(t){e.auth.hideLoader(),$("#editFeeStructureModel").hide(),e.commonService.showErrorMessage("success","Update Successfully","Fee Structure Updated Successfully"),e.getFeeStructures()}),(function(t){e.auth.hideLoader(),e.commonService.showErrorMessage("error","",t.error.message)}))}}},{key:"makeJSONForCustomFee",value:function(){this.customJson=[],this.totalAmount=0,this.discountAmount=0;for(var e=[],t=0;t<this.installmentList.length;t++){var n={fee_type:0};n.initial_fee_amount=this.installmentList[t].initial_fee_amount.toString(),n.service_tax=this.installmentList[t].service_tax.toString(),n.fees_amount=this.installmentList[t].fees_amount.toString(),n.service_tax_applicable=this.installmentList[t].service_tax_applicable,n.schedule_id=this.installmentList[t].schedule_id.toString(),n.is_referenced=this.installmentList[t].is_referenced,n.day_type=this.installmentList[t].day_type.toString(),n.days=Number(this.installmentList[t].days).toString(),this.totalAmount=this.totalAmount+this.installmentList[t].fees_amount,this.discountAmount=this.discountAmount+this.installmentList[t].fees_amount-this.installmentList[t].initial_fee_amount,e.push(n)}for(var i=0;i<this.otherInstList.length;i++){var a={};a.fee_type=this.otherInstList[i].fee_type,a.initial_fee_amount=this.otherInstList[i].initial_fee_amount.toString(),a.service_tax=this.otherInstList[i].service_tax.toString(),a.fees_amount=this.otherInstList[i].fees_amount.toString(),a.service_tax_applicable=this.otherInstList[i].service_tax_applicable,a.schedule_id=this.otherInstList[i].schedule_id.toString(),a.is_referenced=this.otherInstList[i].is_referenced,a.day_type=this.otherInstList[i].day_type.toString(),a.days=Number(this.otherInstList[i].days).toString(),this.totalAmount=this.totalAmount+this.otherInstList[i].fees_amount,this.discountAmount=this.discountAmount+this.otherInstList[i].fees_amount-this.otherInstList[i].initial_fee_amount,e.push(a)}return this.customJson=e,e}},{key:"updateTemplateName",value:function(){""!=this.selectedTemplate.template_name.trim()?this.isHeaderEdit=!1:this.commonService.showErrorMessage("error","","Please enter a valid fee structure name")}},{key:"onApplyTaxChechbox",value:function(e){if("0"==this.enableTax)return this.commonService.showErrorMessage("error","","Please define Tax (%age) in Institute Settings"),void(e.target.checked=!1);e.target.checked?this.installmentList.forEach((function(e){"Y"==e.service_tax_applicable&&e.hasOwnProperty("taxAmount")?(e.fees_amount=Number(e.fees_amount)+Number(e.taxAmount),e.tax=e.taxAmount):(e.tax=.01*Number(e.service_tax)*Number(e.initial_fee_amount),e.taxAmount=e.tax,e.fees_amount=e.initial_fee_amount+e.taxAmount),e.service_tax_applicable="Y"})):this.installmentList.forEach((function(e){e.fees_amount=Number(e.fees_amount)-Number(e.taxAmount),e.tax=0,e.service_tax_applicable="N"})),this.calculateTotalAmount()}},{key:"calculateTotalAmount",value:function(){var e=0;this.installmentList.forEach((function(t){e+=Number(t.fees_amount)})),this.otherInstList.forEach((function(t){e+=Number(t.fees_amount)})),this.totalAmountCal=e}},{key:"deleteRow",value:function(e,t){this.installmentList.splice(t,1),this.calculateTotalAmount()}},{key:"deleteAdditionalRow",value:function(e,t){this.otherInstList.splice(t,1),this.calculateTotalAmount()}},{key:"addInstallmentInTable",value:function(){if(Number(this.AddInstallment.initial_fee_amount)>0&&null!=this.AddInstallment.days)"1"==sessionStorage.getItem("enable_tax_applicable_fee_installments")?(this.AddInstallment.service_tax=Number(this.feeStructure.registeredServiceTax),document.getElementById("checkBoxtaxes").checked?(this.AddInstallment.service_tax_applicable="Y",this.AddInstallment.tax=Math.floor(this.AddInstallment.initial_fee_amount*Number(this.feeStructure.registeredServiceTax)*.01),this.AddInstallment.taxAmount=Number(this.AddInstallment.tax),this.AddInstallment.fees_amount=Number(this.AddInstallment.initial_fee_amount+this.AddInstallment.tax)):(this.AddInstallment.service_tax_applicable="N",this.AddInstallment.fees_amount=this.AddInstallment.initial_fee_amount,this.AddInstallment.tax=0)):(this.AddInstallment.tax=0,this.AddInstallment.fees_amount=this.AddInstallment.initial_fee_amount),this.installmentList.push(this.AddInstallment),this.AddInstallment={days:0,day_type:1,fee_type:0,fees_amount:0,initial_fee_amount:0,is_referenced:"N",schedule_id:0,service_tax:0,service_tax_applicable:"N",tax:0,taxAmount:0};else{if(null==this.AddInstallment.initial_fee_amount||0==this.AddInstallment.initial_fee_amount)return void this.commonService.showErrorMessage("error","","Please enter Amount");if(null==this.AddInstallment.days)return void this.commonService.showErrorMessage("error","","Please enter days/month")}this.calculateTotalAmount()}},{key:"addAdditionalInst",value:function(){if(-1!=this.additionalInstallment.fee_type){if(Number(this.additionalInstallment.initial_fee_amount)>0&&null!=this.additionalInstallment.days)0==this.additionalInstallment.fees_amount?0==this.additionalInstallment.service_tax&&(this.additionalInstallment.fees_amount=this.additionalInstallment.initial_fee_amount):0==this.additionalInstallment.service_tax?this.additionalInstallment.fees_amount=this.additionalInstallment.initial_fee_amount:this.additionalInstallment.fees_amount=Math.round(Number(this.additionalInstallment.initial_fee_amount)+Number(this.additionalInstallment.initial_fee_amount*this.additionalInstallment.service_tax/100)),this.otherInstList.push(this.additionalInstallment),this.additionalInstallment={days:0,day_type:1,fee_type:-1,fees_amount:0,initial_fee_amount:0,is_referenced:"N",schedule_id:0,service_tax:0,service_tax_applicable:"N",fee_type_name:""};else{if(0==this.additionalInstallment.initial_fee_amount||null==this.additionalInstallment.initial_fee_amount)return void this.commonService.showErrorMessage("error","","Please enter Amount");if(null==this.additionalInstallment.days)return void this.commonService.showErrorMessage("error","","Please enter days")}this.calculateTotalAmount()}else this.commonService.showErrorMessage("error","","Please enter fee type")}},{key:"onAdditionalFeeSelection",value:function(e){var t=this,n=e;this.feeTyeDetails=[],this.fetchService.getAdditionalFeeDeatails(e).subscribe((function(e){t.feeTyeDetails=e,t.additionalInstallment.initial_fee_amount=e.fee_amount,t.additionalInstallment.service_tax=e.fee_type_tax,t.additionalInstallment.fee_type=e.fee_type_id,e.fee_type_tax>0&&(t.additionalInstallment.service_tax_applicable="Y"),t.additionalInstallment.fee_type=n,t.additionalInstallment.fees_amount=e.fee_amount+e.fee_amount*e.fee_type_tax*.01,t.additionalInstallment.fee_type_name=e.fee_type}),(function(e){t.commonService.showErrorMessage("error","",e.error.message)}))}},{key:"editTemplateName",value:function(){this.isHeaderEdit=!0}},{key:"cancelTemplateName",value:function(){this.isHeaderEdit=!1,this.selectedTemplate.template_name=this.templateName}},{key:"feeTypesAmountChnge",value:function(e){0==e.service_tax?e.initial_fee_amount=Math.floor(Number(e.fees_amount)):(e.initial_fee_amount=Math.floor(Number(e.fees_amount))-Math.floor(Number(e.fees_amount)-Number(100*e.fees_amount/(100+e.service_tax))),e.initial_fee_amount=Math.floor(e.initial_fee_amount)),this.calculateTotalAmount()}},{key:"feeInstallmentChnge",value:function(e){"N"==e.service_tax_applicable?e.initial_fee_amount=e.fees_amount:(e.tax=e.fees_amount-Math.floor(100*Number(e.fees_amount)/(100+e.service_tax)),e.taxAmount=e.tax,e.initial_fee_amount=e.fees_amount-e.tax),this.calculateTotalAmount()}},{key:"fetchTableDataByPage",value:function(e){this.PageIndex=e;var t=this.displayBatchSize*(e-1);this.tabkeList=this.getDataFromDataSource(t)}},{key:"fetchNext",value:function(){this.PageIndex++,this.fetchTableDataByPage(this.PageIndex)}},{key:"fetchPrevious",value:function(){1!=this.PageIndex&&(this.PageIndex--,this.fetchTableDataByPage(this.PageIndex))}},{key:"getDataFromDataSource",value:function(e){return 1==this.searchDataFlag?this.searchedData.slice(e,e+this.displayBatchSize):this.source.slice(e,e+this.displayBatchSize)}},{key:"searchInList",value:function(){var e=this;if(""!=this.searchText.trim()&&null!=this.searchText.trim()){var t=this.source.filter((function(t){return Object.keys(t).some((function(n){return null!=t[n]&&t[n].toString().toLowerCase().includes(e.searchText.toLowerCase())}))}));this.searchedData=t,this.totalRow=t.length,this.searchDataFlag=!0,this.PageIndex=1,this.fetchTableDataByPage(this.PageIndex)}else this.searchDataFlag=!1,this.fetchTableDataByPage(this.PageIndex),this.totalRow=this.source.length}},{key:"deleteFeeStructure",value:function(e){var t=this,n="N";confirm("Are you sure, you want to delete Fee Structure?")&&(this.auth.showLoader(),this.fetchService.deleteFeeStructure(e.template_id,n).subscribe((function(e){t.auth.hideLoader(),t.commonService.showErrorMessage("success","Deleted","Fee Structure Deleted Successfully"),t.getFeeStructures(),t.searchText="",t.searchDataFlag=!1}),(function(i){t.auth.hideLoader(),i.error.message.includes("Fee template(s) are assigned to student(s).")?confirm("Fee template(s) are assigned to student(s). Do you wish to delete it ?")&&(n="Y",t.auth.showLoader(),t.fetchService.deleteFeeStructure(e.template_id,n).subscribe((function(e){t.auth.hideLoader(),t.commonService.showErrorMessage("success","Deleted","Fee Structure Deleted Successfully"),t.getFeeStructures()}),(function(e){t.auth.hideLoader(),t.commonService.showErrorMessage("error","",e.error.message)}))):t.commonService.showErrorMessage("error","",i.error.message)})))}},{key:"studentsAssigned",value:function(e){null!=e.studentList?(this.addTemplatePopUp=!0,this.studentList=e.studentList):(this.commonService.showErrorMessage("info","","No data found"),this.addTemplatePopUp=!1)}},{key:"closeTemplatePopup",value:function(){this.addTemplatePopUp=!1}},{key:"editFeeStructure",value:function(t){var n=this;$("#editFeeStructureModel").show(),this.totalTax=0,0==this.feeTypeList.length&&this.getInstituteFeeTypes(),this.templateName=t.template_name,this.selectedTemplate=t,this.feeStructure=[],this.feeInstalllmentArr=[],this.auth.showLoader(),this.fetchService.fetchFeeDetail(t.template_id).subscribe((function(t){if(n.auth.hideLoader(),n.feeStructure=t,n.is_default=1==n.feeStructure.is_default,n.totalFeeAmount=n.feeStructure.studentwise_total_fees_amount,null!=n.feeStructure.customFeeSchedules){var i,a=e(n.feeStructure.customFeeSchedules);try{for(a.s();!(i=a.n()).done;){var o=i.value,s={fee_type:o.fee_type,month:o.month,year:o.year,days:o.days,fees_amount:o.fees_amount,day_type:o.day_type,initial_fee_amount:o.initial_fee_amount.toString(),service_tax:o.service_tax,service_tax_applicable:o.service_tax_applicable,schedule_id:o.schedule_id.toString(),is_referenced:o.is_referenced};n.is_tax_enabled&&(n.totalTax+=Number(o.fees_amount)-Number(o.initial_fee_amount)),n.feeInstalllmentArr.push(s)}}catch(r){a.e(r)}finally{a.f()}n.getCurrencyData(n.selectedTemplate.country_id)}}))}},{key:"getInstituteFeeTypes",value:function(){var e=this;this.auth.showLoader(),this.fetchService.getAllFeeType().subscribe((function(t){e.auth.hideLoader(),e.feeTypeList=t}),(function(t){e.auth.hideLoader(),e.commonService.showErrorMessage("error","",t.error.message)}))}},{key:"closePopUp",value:function(){$("#editFeeStructureModel").hide()}},{key:"addInstallment",value:function(e){var t={installment_no:e+2,fee_type:this.feeInstalllmentArr[e].fee_type,month:this.feeInstalllmentArr[e].month,days:this.feeInstalllmentArr[e].days,year:this.feeInstalllmentArr[e].year,fees_amount:this.feeInstalllmentArr[e].fees_amount,initial_fee_amount:this.feeInstalllmentArr[e].initial_fee_amount,day_type:this.feeInstalllmentArr[e].day_type,schedule_id:0,is_referenced:"N",service_tax:this.feeInstalllmentArr[e].fee_type,service_tax_applicable:this.is_tax_enabled?"Y":"N"};this.totalFeeAmount=this.totalFeeAmount+Number(this.feeInstalllmentArr[e].fees_amount),this.totalTax=this.totalTax+this.calculateTax(this.feeInstalllmentArr[e].fees_amount,this.feeInstalllmentArr[e].fee_type),this.feeInstalllmentArr.push(t)}},{key:"deleteInstallment",value:function(e){return 1==this.feeInstalllmentArr.length?(this.commonService.showErrorMessage("info","","You can't delete!"),!1):(this.totalFeeAmount=this.totalFeeAmount-Number(this.feeInstalllmentArr[e].fees_amount),this.feeInstalllmentArr.splice(e,1),!0)}},{key:"validateFeeInstallments",value:function(){if(this.templateName&&""==this.templateName.trim())this.commonService.showErrorMessage("info","","Please enter valid fee structure name!");else{if(0!=this.feeInstalllmentArr.length){var t,n=e(this.feeInstalllmentArr);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(!this.validateEachInstallment(i))return}}catch(a){n.e(a)}finally{n.f()}return!0}this.commonService.showErrorMessage("info","","Please enter valid fee structure details!")}}},{key:"validateEachInstallment",value:function(e){if(e.installment_no<=0)return this.commonService.showErrorMessage("info","","Please enter valid installment No."),!1;if(e.fee_type<=0)return this.commonService.showErrorMessage("info","","Please select valid fee type!"),!1;if(this.schoolModel||this.isTemplateNotLinkWithCourseAndStandard){if(e.days<=0)return this.commonService.showErrorMessage("info","","Please select valid fee day!"),!1;if(e.month<=0)return this.commonService.showErrorMessage("info","","Please select valid fee month!"),!1;if(e.year<=0)return this.commonService.showErrorMessage("info","","Please select valid fee year!"),!1}if(!this.schoolModel){if(e.day_type<=0)return this.commonService.showErrorMessage("info","","Please select valid trigger date!"),!1;if(e.days<0)return this.commonService.showErrorMessage("info","","Please select valid fee day!"),!1}return!(e.fees_amount<=0&&(this.commonService.showErrorMessage("info","","Please enter valid fee amount!"),1))}},{key:"changesValuesAsPerType",value:function(e,t){1==e&&(this.feeInstalllmentArr[t].days=0)}},{key:"calculateTotalFee",value:function(){var t,n=0,i=0,a=0,o=e(this.feeInstalllmentArr);try{for(o.s();!(t=o.n()).done;){var s=t.value;n+=Number(s.fees_amount);var r=this.calculateTax(s.fees_amount,s.fee_type);this.is_tax_enabled&&(this.feeInstalllmentArr[a].service_tax=r,this.feeInstalllmentArr[a].initial_fee_amount=Number(s.fees_amount)-Number(r),a++),i+=r}}catch(l){o.e(l)}finally{o.f()}this.totalFeeAmount=n,this.totalTax=i}},{key:"getCurrencyData",value:function(t){var n,i=e(this.countryDetails);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.id==t){this.currencySymbol=a.currency_code;break}}}catch(o){i.e(o)}finally{i.f()}}},{key:"calFeeAmountWithoutTax",value:function(e,t){return this.is_tax_enabled?Math.floor(100*Number(e)/(100+Number(t))):Number(e)}},{key:"calculateTax",value:function(e,t){if(this.is_tax_enabled){var n=this.getFeeTypeTax(t);return Number(e)-this.calFeeAmountWithoutTax(e,n)}return 0}},{key:"getFeeTypeTax",value:function(t){if(this.is_tax_enabled){var n,i=e(this.feeTypeList);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(t==a.fee_type_id)return Number(a.fee_type_tax)}}catch(o){i.e(o)}finally{i.f()}}return 0}}]),t}()).ctorParameters=function(){return[{type:p.Router},{type:v.a},{type:f.a},{type:g.a}]},r=function(e,t,n,i){var a,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(s=(o<3?a(s):o>3?a(t,n,s):a(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Object(u.Component)({selector:"app-fee-structure-home",template:w(o("AQyt")).default,styles:[w(o("NTek")).default]}),x("design:paramtypes",[p.Router,v.a,f.a,g.a])],r)),I=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},A=function(e){return e&&e.__esModule?e:{default:e}},T=((l=function(){function e(){n(this,e)}return a(e,[{key:"ngOnInit",value:function(){}}]),e}()).ctorParameters=function(){return[]},l=function(e,t,n,i){var a,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(s=(o<3?a(s):o>3?a(t,n,s):a(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Object(u.Component)({selector:"app-fee-structure",template:A(o("twl6")).default,styles:[A(o("iLWn")).default]}),I("design:paramtypes",[])],l)),k=(d=function e(){n(this,e)},d=function(e,t,n,i){var a,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(s=(o<3?a(s):o>3?a(t,n,s):a(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Object(u.NgModule)({imports:[p.RouterModule.forChild([{path:"",component:T,pathMatch:"prefix",children:[{path:"",redirectTo:"home"},{path:"home",component:S},{path:"add",component:b}]}])],exports:[p.RouterModule]})],d)),M=o("3Pt+"),F=o("hGdz"),N=(c=function e(){n(this,e)},c=function(e,t,n,i){var a,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(s=(o<3?a(s):o>3?a(t,n,s):a(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Object(u.NgModule)({declarations:[b,S,T],imports:[h.CommonModule,k,M.FormsModule,M.ReactiveFormsModule,F.a]})],c))},twl6:function(e,t,n){"use strict";n.r(t),t.default="<router-outlet></router-outlet>"},wrH6:function(e,t,n){"use strict";n.r(t),t.default='<div class="page-content">\r\n    <div class="head_padding">\r\n        <div class="w98">\r\n            <div class="page_heading">\r\n                <p>New Structure</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="w98">\r\n        <div class="padding1" *ngIf="!isTemplateNotLinkWithCourseAndStandard">\r\n            <select class="select wid240 mr10" *ngIf="isLangInstitute || schoolModel"\r\n                [(ngModel)]="addNewTemplate.master_course_name" name="masterCourse"\r\n                (ngModelChange)="onMasterCourseSelection()">\r\n                <option value="-1">{{schoolModel?\'Standard\':\'Category/Course\'}}</option>\r\n                <option *ngFor="let opt of masterCourseList" [value]="opt.standard_id">\r\n                    {{opt.standard_name}}\r\n                </option>\r\n            </select>\r\n            <select class="select wid240 mr10" *ngIf="isLangInstitute" [(ngModel)]="addNewTemplate.course_id"\r\n                name="CourseDdn">\r\n                <option value="-1">Batch</option>\r\n                <option *ngFor="let opt of CourseList" [value]="opt.subject_id">\r\n                    {{opt.subject_name}}\r\n                </option>\r\n            </select>\r\n            <select class="select wid240 mr10" *ngIf="!isLangInstitute && !schoolModel"\r\n                [(ngModel)]="addNewTemplate.master_course_name" name="masterCourseDdn"\r\n                (ngModelChange)="onMasterCourseSelection()">\r\n                <option value="-1">Category/Course</option>\r\n                <option *ngFor="let opt of masterCourseList" [value]="opt.master_course">\r\n                    {{opt.master_course}}\r\n                </option>\r\n            </select>\r\n            <select class="select wid240 mr10" *ngIf="!isLangInstitute && !schoolModel"\r\n                [(ngModel)]="addNewTemplate.course_id" name="CourseDdn">\r\n                <option value="-1">Batch</option>\r\n                <option *ngFor="let opt of CourseList.coursesList" [value]="opt.course_id">\r\n                    {{opt.course_name}}\r\n                </option>\r\n            </select>\r\n            <select class="select wid240 mr10" *ngIf="countryDetails.length >1" [(ngModel)]="addNewTemplate.country_id"\r\n                name="CourseCountry" (ngModelChange)="getCurrencyData($event)">\r\n                <option value="-1">Country</option>\r\n                <option [value]="data.id" *ngFor=\'let data of countryDetails\'>\r\n                    {{data.country_name}}\r\n                </option>\r\n            </select>\r\n            <input type="text" class="input wid240 mr10" [(ngModel)]="addNewTemplate.template_name" name="templateName"\r\n                placeholder="Fee Structure Name">\r\n            <span class="right relative">\r\n                <span class="green_top">Total Amount{{is_tax_enabled?\' (Inc. Of Tax) \':\'\'}}:<span>{{currencySymbol}}\r\n                        {{totalFeeAmount | number}}</span></span>\r\n                <p class="itax" *ngIf="is_tax_enabled">Tax: {{currencySymbol}} {{totalTax | number}}</p>\r\n            </span>\r\n        </div>\r\n        <div class="padding1" *ngIf="isTemplateNotLinkWithCourseAndStandard">\r\n            <input type="text" class="input wid240 mr10" [(ngModel)]="addNewTemplate.template_name" name="templateName"\r\n                placeholder="Fee Structure Name">\r\n            <select class="select wid240 mr10" *ngIf="countryDetails.length >1" [(ngModel)]="addNewTemplate.country_id"\r\n                name="CourseCountry" (ngModelChange)="getCurrencyData($event)">\r\n                <option value="-1">Country</option>\r\n                <option [value]="data.id" *ngFor=\'let data of countryDetails\'>\r\n                    {{data.country_name}}\r\n                </option>\r\n            </select>\r\n            <span class="right relative">\r\n                <span class="green_top">Total Amount{{is_tax_enabled?\' (Inc. Of Tax)\':\'\'}}:<span>{{currencySymbol}}\r\n                        {{totalFeeAmount | number }}</span></span>\r\n                <p class="itax" *ngIf="is_tax_enabled">Tax: {{currencySymbol}} {{totalTax | number}}</p>\r\n            </span>\r\n        </div>\r\n        <div class="fee_new">\r\n            <div class="table_heading">\r\n                <div>#</div>\r\n                <div>Fee Type </div>\r\n                <div>{{(schoolModel || isTemplateNotLinkWithCourseAndStandard)?\'Day Of Month\':\'Trigger Date\'}}</div>\r\n                <div>{{(schoolModel || isTemplateNotLinkWithCourseAndStandard)?\'Month\':\'Day/Month\'}}</div>\r\n                <div *ngIf="(schoolModel || isTemplateNotLinkWithCourseAndStandard)">Year</div>\r\n                <div><span>Total Fees <span class="light">(In {{currencySymbol}})</span></span></div>\r\n                <div>Action</div>\r\n            </div>\r\n            <div *ngFor="let data of feeInstalllmentArr; let i=index;">\r\n                <div class="table_body">\r\n                    <div> <label>#</label>{{i+1}}</div>\r\n                    <div>\r\n                        <label>Fee Type </label>\r\n                        <select class="input wid80 select1" [(ngModel)]="feeInstalllmentArr[i].fee_type_id"\r\n                            (ngModelChange)="calculateTotalFee()">\r\n                            <option value="-1">Fee Type</option>\r\n                            <option *ngFor="let data of feeTypeList" [value]="data.fee_type_id">\r\n                                {{data.fee_type | titlecase}}\r\n                            </option>\r\n                        </select>\r\n                    </div>\r\n                    <div *ngIf="schoolModel || isTemplateNotLinkWithCourseAndStandard">\r\n                        <label>{{(schoolModel || isTemplateNotLinkWithCourseAndStandard)?\'Day Of Month\':\'Trigger Date\'}}</label>\r\n                        <select class="input wid80 select2" [(ngModel)]="feeInstalllmentArr[i].day">\r\n                            <option value="-1">Day</option>\r\n                            <option *ngFor="let day of dayOfmonth" [value]="day">{{day}}</option>\r\n                        </select>\r\n                    </div>\r\n                    <div *ngIf="!schoolModel && !isTemplateNotLinkWithCourseAndStandard">\r\n                        <label>{{(schoolModel || isTemplateNotLinkWithCourseAndStandard)?\'Month\':\'Day/Month\'}}</label>\r\n                        <select style="width: 90%;" class="input wid80 select2" [(ngModel)]="feeInstalllmentArr[i].day_type"\r\n                            (ngModelChange)="changesValuesAsPerType($event,i)">\r\n                            <option value="-1">Trigger Date</option>\r\n                            <option value="1">Batch Assign Date (CAD)</option>\r\n                            <option value="2">No of days after CAD</option>\r\n                            <option value="3">No of Month after CAD</option>\r\n                        </select>\r\n                    </div>\r\n                    <div *ngIf="schoolModel || isTemplateNotLinkWithCourseAndStandard">\r\n                        <label *ngIf="(schoolModel || isTemplateNotLinkWithCourseAndStandard)">Month</label>\r\n                        <select class="input wid80 select2" [(ngModel)]="feeInstalllmentArr[i].month">\r\n                            <option value="-1">Month</option>\r\n                            <option *ngFor="let mon of months" [value]="mon.id">{{mon.value}}</option>\r\n                        </select>\r\n                    </div>\r\n                    <div *ngIf="schoolModel || isTemplateNotLinkWithCourseAndStandard">\r\n                        <label *ngIf="(schoolModel || isTemplateNotLinkWithCourseAndStandard)">Year</label>\r\n                     \r\n                        <select class="input wid80 select2" [(ngModel)]="feeInstalllmentArr[i].year">\r\n                            <option value="-1">Year</option>\r\n                            <option value="2015">2015</option>\r\n                            <option value="2016">2016</option>\r\n                            <option value="2017">2017</option>\r\n                            <option value="2018">2018</option>\r\n                            <option value="2019">2019</option>\r\n                            <option value="2020">2020</option>\r\n                            <option value="2021">2021</option>\r\n                            <option value="2022">2022</option>\r\n                            <option value="2023">2023</option>\r\n                            <option value="2024">2024</option>\r\n                            <option value="2025">2025</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div *ngIf="!schoolModel && !isTemplateNotLinkWithCourseAndStandard">\r\n                        <label><span>Total Fees <span class="light">(In {{currencySymbol}})</span></span></label>\r\n                        <input type="text" [disabled]="feeInstalllmentArr[i].day_type==1" [(ngModel)]="feeInstalllmentArr[i].day" placeholder="0"\r\n                            class="input wid80 rrs" onkeypress="return (event.charCode >= 48 && event.charCode <= 57)">\r\n                    </div>\r\n                    <div>  <label><span>Total Fees <span class="light">(In {{currencySymbol}})</span></span></label>\r\n                        <input type="text" [(ngModel)]="feeInstalllmentArr[i].fee_amount" placeholder="00"\r\n                            class="input wid80 rrs" (keyup)="calculateTotalFee()"\r\n                            onkeypress="return (event.charCode >= 48 && event.charCode <= 57)"></div>\r\n                    <div>\r\n                        <label>Action</label>\r\n                        <a (click)="addInstallment(i)" class="mr10"><img src="../../../../../assets/images/add.svg"\r\n                                class="size22 pointer" title="Add"></a>\r\n                        <a (click)="deleteInstallment(i)"><img src="../../../../../assets/images/Group321.svg"\r\n                                class="size22 pointer" title="Delete"></a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \x3c!-- use image only when page is empty,table body class element will not be present --\x3e\r\n    </div>\r\n    <div class="w98">\r\n        <div class="save">\r\n            <button class="blue_button" (click)="createFeeStructure()">Save</button>\r\n        </div>\r\n    </div>\r\n</div>'}}])}();