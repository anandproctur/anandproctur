!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"0ler":function(e,t,n){"use strict";n.r(t),t.default=".pie-wrapper {\n  box-shadow: 0px 0px 2px 1px;\n  background: #fff;\n}\n\n.pie-wrapper .row {\n  margin: 0px;\n}\n\n.pie-wrapper .field-wrapper {\n  width: 200px;\n  float: right;\n  margin-right: 10px;\n}\n"},"2cUC":function(e,t,n){"use strict";n.r(t),t.default=".line-wrapper {\n  margin: 20px 14px 10px;\n  box-shadow: 0px 0px 2px 1px;\n  background: #fff;\n}\n\n.line-wrapper .row {\n  margin: 0px;\n}\n\n.line-wrapper .field-wrapper {\n  width: 200px;\n  float: right;\n  margin-right: 10px;\n}\n"},"2szM":function(e,t,n){"use strict";n.r(t),t.default='<section class="pie-wrapper">\r\n\r\n    <section class="row pie-filter" [ngClass]="{\'hide\': !isDataLoaded}">\r\n        <div class="field-wrapper">\r\n            \x3c!-- <label for="duration">Duration</label> --\x3e\r\n            <select name="" id="duration" [(ngModel)]="rangeSelected" (ngModelChange)="dateRangeUpdated($event)" class="form-ctrl">\r\n                <option value="1" selected="">Last 7 days</option>\r\n                <option value="2">This month</option>\r\n                <option value="3">Last 30 days</option>\r\n                <option value="4">Last month</option>\r\n                <option value="5">Last 3 months</option>\r\n            </select>\r\n        </div>\r\n    </section>\r\n    <section class="row" [ngClass]="{\'hide\': !isDataLoaded}">\r\n        <div id="pieContainer">\r\n        </div>\r\n    </section>\r\n\r\n    <div style="padding: 5px;" [ngClass]="{\'hide\': isDataLoaded}">\r\n        Loading Data...\r\n    </div>\r\n\r\n</section>'},Bqnk:function(e,t,n){"use strict";n.r(t),t.default='<section class="line-wrapper">\r\n\r\n    <section class="row pie-filter" [ngClass]="{\'hide\': !isDataLoaded}">\r\n        <div class="field-wrapper">\r\n            \x3c!-- <label for="duration">Duration</label> --\x3e\r\n            <select name="" id="duration" [(ngModel)]="rangelineSelected" (ngModelChange)="datelineRangeUpdated($event)" class="form-ctrl">\r\n                <option value="1" selected="">Last 7 days</option>\r\n                <option value="2">This Month</option>\r\n                <option value="3">Last 30 Days</option>\r\n                <option value="4">Last Month</option>\r\n                <option value="5">Last 3 Months</option>\r\n            </select>\r\n        </div>\r\n    </section>\r\n    <section class="row" [ngClass]="{\'hide\': !isDataLoaded}">\r\n        <div id="lineContainer">\r\n        </div>\r\n    </section>\r\n\r\n    <div style="padding: 5px;" [ngClass]="{\'hide\': isDataLoaded}">\r\n        Loading Data...\r\n    </div>\r\n\r\n</section>'},DXej:function(e,t,n){"use strict";n.r(t),t.default=".monitor-wrapper {\n  width: 100%;\n  background: #efefef;\n  overflow: auto;\n}\n\n.monitor-wrapper ::-webkit-scrollbar {\n  display: block;\n}\n\n.monitor-wrapper .header {\n  margin: 10px 12px;\n  width: 98%;\n  padding: 15px 15px;\n  border-bottom: 1px solid rgba(10, 10, 10, 0.5);\n}\n"},JEgh:function(t,a,r){"use strict";r.r(a),r.d(a,"MonitoringDashboardModule",(function(){return E}));var o,i,s,c,l,d,f,u,p=r("fXoL"),h=r("ofXK"),m=r("3Pt+"),g=r("wd/R"),y=(r("yLV6"),r("lJxs")),D=r("tk/3"),b=r("xf7K"),v=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},M=((o=function(){function t(n,a){var r=this;e(this,t),this.http=n,this.auth=a,this.baseUrl="",this.institute_id=sessionStorage.getItem("institute_id"),this.auth.currentAuthKey.subscribe((function(e){r.Authorization=e,r.headers=new D.e({"Content-Type":"application/json",Authorization:r.Authorization})})),this.auth.currentInstituteId.subscribe((function(e){r.institute_id=e})),this.baseUrl=this.auth.getBaseUrl()}return n(t,[{key:"fetchFeeStackMonitor",value:function(){var e=this.baseUrl+"/api/v1/studentWise/fee/students/highCharts/"+this.institute_id;return this.http.get(e,{headers:this.headers}).pipe(Object(y.a)((function(e){return e}),(function(e){return e})))}},{key:"fetchFeeMonitor",value:function(e){var t=this.baseUrl+"/api/v1/studentWise/fee/students/highChartsRender";return this.http.post(t,e,{headers:this.headers}).pipe(Object(y.a)((function(e){return e}),(function(e){return e})))}}]),t}()).ctorParameters=function(){return[{type:D.b},{type:b.a}]},o=function(e,t,n,a){var r,o=arguments.length,i=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o<3?r(i):o>3?r(t,n,i):r(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([Object(p.Injectable)(),v("design:paramtypes",[D.b,b.a])],o)),Y=r("tyNb"),w=function(e){return e&&e.__esModule?e:{default:e}},_=(i=function t(){e(this,t)},i=function(e,t,n,a){var r,o=arguments.length,i=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o<3?r(i):o>3?r(t,n,i):r(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([Object(p.Component)({selector:"dashboard-home",template:w(r("slQ2")).default,styles:[w(r("DXej")).default]})],i)),R=(s=function t(){e(this,t)},s=function(e,t,n,a){var r,o=arguments.length,i=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o<3?r(i):o>3?r(t,n,i):r(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([Object(p.NgModule)({imports:[Y.RouterModule.forChild([{path:"",component:_,pathMatch:"prefix",children:[{path:"",redirectTo:"home"},{path:"home",component:_}]}])],exports:[Y.RouterModule]})],s)),O=function(e){return e&&e.__esModule?e:{default:e}},x=(c=function t(){e(this,t)},c=function(e,t,n,a){var r,o=arguments.length,i=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o<3?r(i):o>3?r(t,n,i):r(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([Object(p.Component)({selector:"monitoring-dashboard",template:O(r("wZj3")).default,styles:[O(r("pawv")).default]})],c)),k=r("6n/F"),C=r("OHzG"),j=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},L=function(e){return e&&e.__esModule?e:{default:e}},P=((l=function(){function t(n,a){e(this,t),this.getService=n,this._commService=a,this.datelineRange=[],this.rangelineSelected="2",this.rangeType="This Month",this.isDataLoaded=!1,this.datelineRange[0]=g(new Date).startOf("month").format("YYYY-MM-DD"),this.datelineRange[1]=g(new Date).endOf("month").format("YYYY-MM-DD")}return n(t,[{key:"ngOnInit",value:function(){this.fetchFeeStackMonitor()}},{key:"datelineRangeUpdated",value:function(e){1==e?(this.datelineRange[1]=g(new Date).format("YYYY-MM-DD"),this.datelineRange[0]=g(new Date).subtract(7,"days").format("YYYY-MM-DD"),this.rangeType="Last 7 days"):2==e?(this.datelineRange[0]=g(new Date).startOf("month").format("YYYY-MM-DD"),this.datelineRange[1]=g(new Date).endOf("month").format("YYYY-MM-DD"),this.rangeType="This Month"):3==e?(this.datelineRange[1]=g(new Date).format("YYYY-MM-DD"),this.datelineRange[0]=g(new Date).subtract(30,"days").format("YYYY-MM-DD"),this.rangeType="Last 30 Days"):4==e?(this.datelineRange[0]=g(new Date).startOf("month").subtract(1,"months").format("YYYY-MM-DD"),this.datelineRange[1]=g(new Date).startOf("month").subtract(1,"months").endOf("month").format("YYYY-MM-DD"),this.rangeType="Last Month"):5==e&&(this.datelineRange[0]=g(new Date).startOf("month").subtract(3,"months").format("YYYY-MM-DD"),this.datelineRange[1]=g(new Date).format("YYYY-MM-DD"),this.rangeType="Last 3 Months"),this.fetchFeeStackMonitor()}},{key:"fetchFeeStackMonitor",value:function(){var e=this,t={from_date:g(this.datelineRange[0]).format("YYYY-MM-DD"),high_charts_name:"",institute_id:sessionStorage.getItem("institute_id"),to_date:g(this.datelineRange[1]).format("YYYY-MM-DD")};this.getService.fetchFeeMonitor(t).subscribe((function(t){e.isDataLoaded=!0,e.generateChartData(t)}),(function(t){e.isDataLoaded=!0}))}},{key:"generateChartData",value:function(e){var t=[],n=[];e.map((function(e){t.push(e.paid_date),n.push(e.total_fees)})),this.createChart(t,n)}},{key:"createChart",value:function(e,t){k.chart("lineContainer",{chart:{zoomType:"x"},title:{text:"Fee Collection"},subtitle:{text:this.rangeType},xAxis:{categories:e},yAxis:{title:{text:"Amount(Rs)"}},tooltip:{pointFormat:'<span style="color:{series.color}">\u25cf</span> {series.name}: <b> '+this._commService.currency_default_symbol+" {point.y} </b>"},plotOptions:{area:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,k.getOptions().colors[0]],[1,k.Color(k.getOptions().colors[1])]]},marker:{radius:2},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null},line:{dataLabels:{enabled:!0,format:this._commService.currency_default_symbol+" {y}"},enableMouseTracking:!0}},series:[{name:"Dates",data:t}]})}}]),t}()).ctorParameters=function(){return[{type:M},{type:C.a}]},l=function(e,t,n,a){var r,o=arguments.length,i=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o<3?r(i):o>3?r(t,n,i):r(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([Object(p.Component)({selector:"fee-line",template:L(r("Bqnk")).default,styles:[L(r("2cUC")).default]}),j("design:paramtypes",[M,C.a])],l)),S=r("N+K7"),F=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},T=function(e){return e&&e.__esModule?e:{default:e}},I=((d=function(){function t(n,a,r){e(this,t),this.getService=n,this._commService=a,this.httpService=r,this.FeeDataData=[0,0,0,0],this.isDataLoaded=!1,this.dateRange=[],this.rangeSelected="2",this.Payment_Modes=[],this.dateRange[0]=g(new Date).startOf("month").format("YYYY-MM-DD"),this.dateRange[1]=g(new Date).endOf("month").format("YYYY-MM-DD")}return n(t,[{key:"ngOnInit",value:function(){this.fetchFeeStackMonitor()}},{key:"dateRangeUpdated",value:function(e){1==e?(this.dateRange[1]=g(new Date).format("YYYY-MM-DD"),this.dateRange[0]=g(new Date).subtract(7,"days").format("YYYY-MM-DD")):2==e?(this.dateRange[0]=g(new Date).startOf("month").format("YYYY-MM-DD"),this.dateRange[1]=g(new Date).endOf("month").format("YYYY-MM-DD")):3==e?(this.dateRange[1]=g(new Date).format("YYYY-MM-DD"),this.dateRange[0]=g(new Date).subtract(30,"days").format("YYYY-MM-DD")):4==e?(this.dateRange[0]=g(new Date).startOf("month").subtract(1,"months").format("YYYY-MM-DD"),this.dateRange[1]=g(new Date).startOf("month").subtract(1,"months").endOf("month").format("YYYY-MM-DD")):5==e&&(this.dateRange[0]=g(new Date).startOf("month").subtract(3,"months").format("YYYY-MM-DD"),this.dateRange[1]=g(new Date).format("YYYY-MM-DD")),this.fetchFeeStackMonitor()}},{key:"fetchFeeStackMonitor",value:function(){var e=this,t={from_date:g(this.dateRange[0]).format("YYYY-MM-DD"),high_charts_name:"pieCharts",institute_id:sessionStorage.getItem("institute_id"),to_date:g(this.dateRange[1]).format("YYYY-MM-DD")};this.getService.fetchFeeMonitor(t).subscribe((function(t){e.isDataLoaded=!0,e.generateChartData(t)}),(function(t){e.isDataLoaded=!1}))}},{key:"generateChartData",value:function(e){var t=this,n=e;this.httpService.getData("/api/v1/masterData/type/PAYMENT_MODES").subscribe((function(e){t.Payment_Modes=e,t.Payment_Modes&&t.Payment_Modes.length>0&&t.Payment_Modes.forEach((function(e){e.value=0})),n.forEach((function(e){t.Payment_Modes.forEach((function(t){e.paymentMode==t.data_key&&(t.value=e.total_fees)}))})),t.createChart(t.Payment_Modes)}),(function(e){console.log(e)}))}},{key:"createChart",value:function(e){var t=[];e.forEach((function(e){if("Cash"==e.data_key){var n={name:e.data_key,y:e.value,sliced:!0,selected:!0};t.push(n)}else{var a={name:e.data_key,y:e.value};t.push(a)}})),k.chart("pieContainer",{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",options3d:{enabled:!0,alpha:45,beta:0}},title:{text:"Payment Mode"},tooltip:{pointFormat:'<span style="color:{series.color}">\u25cf</span> {series.name}: <b> '+this._commService.currency_default_symbol+" {point.y} </b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:this._commService.currency_default_symbol+"{y}"},showInLegend:!0}},series:[{name:"Payment Mode",colorByPoint:!0,data:t}]})}}]),t}()).ctorParameters=function(){return[{type:M},{type:C.a},{type:S.a}]},d=function(e,t,n,a){var r,o=arguments.length,i=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o<3?r(i):o>3?r(t,n,i):r(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([Object(p.Component)({selector:"fee-pie",template:T(r("2szM")).default,styles:[T(r("0ler")).default]}),F("design:paramtypes",[M,C.a,S.a])],d)),U=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},A=function(e){return e&&e.__esModule?e:{default:e}},z=((f=function(){function t(n,a){e(this,t),this.getService=n,this._commService=a,this.isDataLoaded=!1,this.FeeDataData=[0,0,0,0]}return n(t,[{key:"ngOnInit",value:function(){this.fetchFeeStackMonitor()}},{key:"fetchFeeStackMonitor",value:function(){var e=this;this.getService.fetchFeeStackMonitor().subscribe((function(t){e.isDataLoaded=!0,e.isDataLoaded&&e.generateChartData(t)}),(function(t){e.isDataLoaded=!1}))}},{key:"generateChartData",value:function(e){var t=parseInt(e.total_future_dues),n=parseInt(e.total_dues_amount_in_next_thirty_days),a=parseInt(e.total_dues_pending),r=parseInt(e.total_paid_amount_in_last_thirty_days);this.createChart(t,n,a,r)}},{key:"createChart",value:function(e,t,n,a){k.chart("feestackbar",{chart:{type:"column",options3d:{enabled:!0,alpha:15,beta:15,viewDistance:25,depth:40},backgroundColor:"#FFF"},title:{text:""},xAxis:{categories:["Future dues","Dues in next 30 days","Past dues","Paid in last 30 days"],labels:{skew3d:!0,style:{fontSize:"16px"}}},yAxis:{visible:!1,allowDecimals:!1,min:0,title:{text:"Amount in Rs",skew3d:!0}},tooltip:{headerFormat:"<b>{point.key}</b><br>",pointFormat:"{series.name}: "+this._commService.currency_default_symbol+" {point.y}"},plotOptions:{column:{dataLabels:{enabled:!0,color:"#FFF",format:this._commService.currency_default_symbol+" {y}",x:0},stacking:"normal",depth:40}},series:[{data:[{y:e,name:"Future dues",color:"#80cbc4"},{y:t,name:"Dues in next 30 days",color:"#37474f"},{y:n,name:"Past dues",color:"#536DFE"},{y:a,name:"Paid in last 30 days",color:"#2e7d32"}]}]})}}]),t}()).ctorParameters=function(){return[{type:M},{type:C.a}]},f=function(e,t,n,a){var r,o=arguments.length,i=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o<3?r(i):o>3?r(t,n,i):r(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([Object(p.Component)({selector:"fee-stackbar",template:A(r("TMT7")).default,styles:[A(r("zUNO")).default]}),U("design:paramtypes",[M,C.a])],f)),E=(u=function t(){e(this,t)},u=function(e,t,n,a){var r,o=arguments.length,i=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o<3?r(i):o>3?r(t,n,i):r(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([Object(p.NgModule)({imports:[m.FormsModule,m.ReactiveFormsModule,h.CommonModule,R],declarations:[x,_,P,I,z],entryComponents:[P,I,z],providers:[M]})],u))},TMT7:function(e,t,n){"use strict";n.r(t),t.default='<section class="stackwrapper">\r\n\r\n    <div [ngClass]="{\'hide\': !isDataLoaded}" id="feestackbar">\r\n    </div>\r\n\r\n    <div style="padding: 5px;" [ngClass]="{\'hide\': isDataLoaded}">\r\n        Loading Data...\r\n    </div>\r\n\r\n</section>'},pawv:function(e,t,n){"use strict";n.r(t),t.default=""},slQ2:function(e,t,n){"use strict";n.r(t),t.default='<section class="monitor-wrapper">\r\n\r\n    <section class="c-lg-12 header">\r\n        <h2 class="pull-left">\r\n            <a routerLink="/view/fee">\r\n                Fees\r\n            </a>\r\n            <i style="font-family: \'FontAwesome\';" class="fas fa-angle-right"></i> Monitoring Dashboard\r\n        </h2>\r\n        <aside class="pull-right">\r\n        </aside>\r\n    </section>\r\n\r\n    <div style="margin-top: 5px;" class="c-lg-12">\r\n        <div class="c-lg-4">\r\n            <fee-stackbar></fee-stackbar>\r\n        </div>\r\n        <div class="c-lg-2"></div>\r\n        <div class="c-lg-6">\r\n            <fee-pie></fee-pie>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="c-lg-12">\r\n        <fee-line></fee-line>\r\n    </div>\r\n\r\n</section>'},wZj3:function(e,t,n){"use strict";n.r(t),t.default="<router-outlet></router-outlet>"},zUNO:function(e,t,n){"use strict";n.r(t),t.default=".stackwrapper {\n  padding-top: 44px;\n  box-shadow: 0px 0px 2px 1px;\n  background: #fff;\n}\n"}}])}();